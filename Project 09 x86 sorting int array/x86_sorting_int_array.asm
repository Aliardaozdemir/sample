.MODEL SMALL
.STACK 100
.DATA

MSG1	  DB "BEFORE SORTING: $"
MSG2	  DB "AFTER SORTING: $"

CRLF	  DB 13,10,'$'
ANARRAY	  DB 1,2,4,8,16,32,64,128,256
KEY	  DB 16

.CODE
MAIN PROC
	  MOV AX,@DATA
	  MOV DS,AX

	  MOV AH,9
	  LEA DX,MSG1
	  INT 21H

	  CALL PRINTARRAY

	  MOV AH,9
	  LEA DX,CRLF
	  INT 21H

	  CALL SORT

	  MOV AH,9
	  LEA DX,MSG2
	  INT 21H

	  CALL PRINTARRAY

	  MOV AH,04CH
	  INT 21H
MAIN ENDP

PRINTARRAY PROC
	  LEA DX,ANARRAY
	  MOV CX,KEY
	  MOV DI,DX
START:	  MOV AH,2
	  MOV DL,[DI]
	  OR DL,30H
	  INT 21H
	  MOV DL,''
	  INT 21H
	  INC DI
	  LOOP START
	  RET
PRINTARRAY ENDP

SWAP PROC
	  MOV AL,[DI]
	  XCHG AL,[SI]
	  MOV [DI],AL
	  RET
SWAP ENDP

SORT PROC
	  MOV CX,KEY
	  MOV BP,KEY
	  LEA DX,ANARRAY
	  MOV DI,DX
INLOOP:	  PUSH CX
	  MOV CX,BP
	  MOV SI,DI
OUTLOOP:  MOV BL,[DI]
	  CMP BL,[SI]
	  JG DONE
	  JMP CONTINUE
DONE:	  CALL SWAP
	  JMP CONTINUE

CONTINUE: INC SI
	  LOOP OUTLOOP
	  INC DI
	  DEC BP
	  POP CX
	  LOOP INLOOP
	  RET
SORT ENDP

END MAIN
	  

